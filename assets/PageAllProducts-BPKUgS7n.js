import{u as E}from"./products.store-kxsp_Gsn.js";import{d as A,e as r,f as p,u as q,g as L,h as M,c as v,b as o,F as w,i as I,n as k,j as N,k as W,o as u,r as X,l as z,w as F,t as x,m as T,v as j,_ as S,p as H,q as U,a as G}from"./index-CiXAIqXm.js";const J={class:"pagination"},K={class:"pagination__cards"},O={class:"pagination__card-img"},Q=["src","alt"],Y={class:"pagination__card-text"},Z=["onClick"],tt=A({__name:"AppPagination",props:{cardsData:{},pageItemCount:{},linkCard:{},linkPage:{},visibleBtn:{},gapBtn:{}},setup(P){const c="/game3d/",t=P,m=W(),g=q(),l=r(null),h=r(null),i=r(null),B=p(()=>{if(t.cardsData)return Math.ceil(t.cardsData.length/t.pageItemCount)}),C=r(0),_=p(()=>{const e=g.query.page;if(e&&typeof e=="string")return parseInt(e)||1}),a=r(_.value),V=p(()=>{if(a.value&&t.cardsData){const e=a.value*t.pageItemCount;return e>t.cardsData.length?t.cardsData.length:e}}),b=p(()=>{if(_.value)return _.value*t.pageItemCount-t.pageItemCount}),y=(e,s)=>{a.value=e,m.replace(`${t.linkPage}?page=${a.value}`),C.value=s},R=p(()=>({"--btn-gap":t.gapBtn}));let d=null;return L(()=>{if(!l.value)return;const e=l.value[0];if(e){const f=e.getBoundingClientRect().width;d=f+parseInt(t.gapBtn);const n=f*t.visibleBtn+parseInt(t.gapBtn)*(t.visibleBtn-1);h.value&&(h.value.style.width=n+"px")}let s=0;a.value&&(a.value>t.visibleBtn&&(s=(a.value-(t.visibleBtn-1))*-d),a.value===t.visibleBtn&&(s=-d),a.value===l.value.length&&(s+=d),i.value&&(i.value.style.transform=`translateX(${s}px)`))}),M(()=>{!a.value||!l.value||!i.value||(a.value>=t.visibleBtn&&a.value!==l.value.length&&(i.value.style.transform=`translateX(${(a.value-(t.visibleBtn-1))*-d}px)`),a.value<t.visibleBtn&&(i.value.style.transform="translateX(0px)"))}),(e,s)=>{const f=X("RouterLink");return u(),v("div",J,[o("div",K,[(u(!0),v(w,null,I(e.cardsData.slice(b.value,V.value),n=>(u(),z(f,{to:`${e.linkCard}${n.id}`,key:n.id,class:"pagination__card"},{default:F(()=>[o("span",O,[o("img",{src:`${c}/images/${n.images[0]}`,alt:n.name},null,8,Q)]),o("span",Y,x(n.name),1)]),_:2},1032,["to"]))),128))]),o("div",{style:N(R.value),class:"pagination__footer"},[o("button",{onClick:s[0]||(s[0]=n=>y(1,0)),class:k(["pagination__to-start",{"hidden-dots":_.value<e.visibleBtn}])}," В начало ",2),o("div",{ref_key:"wrapperVisibleWidth",ref:h,class:"pagination__hidden-btn"},[o("div",{ref_key:"containerBtn",ref:i,class:"pagination__container-btn"},[(u(!0),v(w,null,I(B.value,(n,D)=>{var $;return T((u(),v("button",{ref_for:!0,ref_key:"allBtn",ref:l,onClick:it=>y(n,D),class:k(["pagination__btn no-select",{"active-btn":n===a.value}]),key:D},x(n),11,Z)),[[j,b.value<=t.cardsData.length&&(($=l.value)==null?void 0:$.length)!==1]])}),128))],512)],512),o("div",{class:k([{"hidden-dots":b.value>e.cardsData.length||a.value===B.value||C.value+e.visibleBtn>B.value},"pagination__dots no-select"]),"aria-hidden":"true"},s[1]||(s[1]=[o("button",{style:{"background-color":"black"}},"...",-1)]),2)],4)])}}}),et=S(tt,[["__scopeId","data-v-cf8dde10"]]),at={key:0,class:"all-products x-center width-common"},nt="/product/",st="/products/",ot="16px",lt=3,rt=A({__name:"PageAllProducts",setup(P){const c=E(),t=r(null),m=r(6);return H(async()=>{await c.fetchProducts(),c.products&&(t.value=c.products.map(g=>({...g})))}),(g,l)=>t.value?(u(),v("section",at,[G(et,{gapBtn:ot,cardsData:t.value,pageItemCount:m.value,linkCard:nt,linkPage:st,visibleBtn:lt},null,8,["cardsData","pageItemCount"])])):U("",!0)}}),dt=S(rt,[["__scopeId","data-v-f33a8dfa"]]);export{dt as default};
